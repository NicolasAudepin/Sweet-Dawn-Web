(this.webpackJsonphandpose=this.webpackJsonphandpose||[]).push([[0],{193:function(e,t,n){},255:function(e,t,n){e.exports=n(290)},260:function(e,t,n){},266:function(e,t){},267:function(e,t){},275:function(e,t){},278:function(e,t){},279:function(e,t){},290:function(e,t,n){"use strict";n.r(t);var a=n(35),u=n.n(a),r=n(233),o=n.n(r),c=(n(260),n(5)),l=n(10),i=n(14),s=n(13),p=(n(193),n(4)),d=n.n(p),f=n(11),h=(n(289),n(253)),m=n(254),v=n.n(m),g=n(6),b=function(e,t){e.forEach((function(e){var n=Object(g.a)(e.bbox,4),a=n[0],u=n[1],r=n[2],o=n[3],c=e.class;t.strokeStyle="#4411FF",t.font="18px Arial",t.lineWidth="4",t.beginPath(),t.fillStyle="#4411FF",t.fillText(c,a,u),t.rect(a,u,r,o),t.stroke()}))};var O=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.load();case 2:t=e.sent,console.log("coco model loaded."),setInterval((function(){o(t)}),10);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var a=Object(f.a)(d.a.mark((function a(u){var r,o,c,l,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("undefined"===typeof t.current||null===t.current||4!==t.current.video.readyState){a.next=14;break}return r=t.current.video,o=t.current.video.videoWidth,c=t.current.video.videoHeight,t.current.video.width=o,t.current.video.height=c,n.current.width=o,n.current.height=c,a.next=10,u.detect(r);case 10:l=a.sent,i=n.current.getContext("2d"),b(l,i),s=l,e.parentCallback(s);case 14:case"end":return a.stop()}var s}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(a.useEffect)((function(){r()}),[]),u.a.createElement("div",null,u.a.createElement("h2",null,"WEBCAM"),u.a.createElement("div",null,u.a.createElement(v.a,{ref:t,muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),u.a.createElement("canvas",{ref:n,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:640,height:480}})))},E=n(41),S=n(56),j=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).SendNote=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,u,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(g.a)(t,3),u=n[0],r=n[1],o=n[2],a.state.currentOutput.playNote(u,o,{velocity:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.Sendnotes=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){console.log("NOTE"),e.playNote("G4","all",{velocity:1}).stopNote("G4","all",{time:400})},console.log("seeend noootes"),setInterval((function(){null===t?console.log("outnuuuulll"):n(t)}),500);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),console.log("midi out constructor"),a.state={inputs:[],outputs:[],currentOutput:null,currentInput:null},a.SetupMidi=a.SetupMidi.bind(Object(E.a)(a)),a.HandleInChange=a.HandleInChange.bind(Object(E.a)(a)),a.HandleOutChange=a.HandleOutChange.bind(Object(E.a)(a)),a.Sendnotes=a.Sendnotes.bind(Object(E.a)(a)),a.SendNote=a.SendNote.bind(Object(E.a)(a)),a.SetupMidi(),a}return Object(l.a)(n,[{key:"SetupMidi",value:function(){var e=this,t=[],n=[];S.enable((function(e){e?console.log("WebMidi could not be enabled.",e):(console.log("WebMidi enabled!"),console.log(S.inputs),console.log(S.outputs),console.log(S.outputs.length),S.inputs.map((function(e,t){return n.push(u.a.createElement("option",{value:S.inputs[t].name},S.inputs[t].name))})),S.outputs.map((function(e,n){return t.push(u.a.createElement("option",{value:S.outputs[n].name},S.outputs[n].name))})),S.outputs.map((function(e,t){return console.log(S.outputs[t])})),S.outputs.map((function(e,t){return console.log(S.outputs[t].name)})))})),setTimeout((function(){e.setState({outputs:t,inputs:n})}),3e3)}},{key:"HandleInChange",value:function(e){var t=this,n=e.target.value,a=S.getInputByName(n);setTimeout((function(){t.setState({currentInput:a})}),3e3)}},{key:"HandleOutChange",value:function(e){var t=this,n=e.target.value,a=S.getOutputByName(n);setTimeout((function(){t.setState({currentOutput:a})}),3e3)}},{key:"render",value:function(){null===this.props.note||null!=this.state.currentOutput&&(this.SendNote(this.props.note),console.log("note send"));var e=this.state,t=e.inputs,n=e.outputs;return u.a.createElement("div",null,u.a.createElement("h2",null,"MIDI I/O"),u.a.createElement("div",null,u.a.createElement("div",null,"Input",u.a.createElement("select",{id:"selectInput",onChange:this.HandleInChange},t)),u.a.createElement("div",null,"Output",u.a.createElement("select",{id:"selectOutput",onChange:this.HandleOutChange},n))))}}]),n}(a.Component),y=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"sendData",value:function(e){this.props.callbackSendNote(e)}},{key:"render",value:function(){var e=this.props.detections,t=e.map((function(e){return e.class})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(t){return{name:t,count:e.filter((function(e){return e.class===t})).length}})),n=e.filter((function(e){return"tv"===e.class})).length,a=e.filter((function(e){return"laptop"===e.class})).length,r=e.filter((function(e){return"cell phone"===e.class})).length,o=e.filter((function(e){return"person"===e.class})).length,c=e.length/3;return console.log(c),u.a.createElement("div",null,u.a.createElement(j,{note:["G3",c,1]}),u.a.createElement("h2",null,"DATAVIS"),u.a.createElement("div",null,u.a.createElement("h3",null,"Detected Stuff"),t.map((function(e,t){return u.a.createElement("p",null,e.name," : ",e.count)}))),u.a.createElement("div",null,u.a.createElement("h3",null,"Cool Values"),u.a.createElement("p",null,"Screen Per Personne :",(n+a+r)/Math.max(o,1)),u.a.createElement("p",null,"Number of Detection :",e.length)))}}]),n}(a.Component),k=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,u=new Array(a),r=0;r<a;r++)u[r]=arguments[r];return(e=t.call.apply(t,[this].concat(u))).state={detections:[],note:null},e.callbackSetDetections=function(t){e.setState({detections:t})},e.callbackSendNote=function(t){e.setState({note:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.detections;return u.a.createElement("div",{className:"App"},u.a.createElement("header",{className:"App-header"},u.a.createElement("h1",null,"SWEET DAWN"),u.a.createElement(y,{detections:e,callbackSendNote:this.callbackSendNote}),u.a.createElement(O,{parentCallback:this.callbackSetDetections})))}}]),n}(a.Component);o.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(k,null)),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.f606e5d8.chunk.js.map